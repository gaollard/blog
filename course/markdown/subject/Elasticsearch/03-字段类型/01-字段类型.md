---
title: 01-字段类型
url: https://www.yuque.com/gaollard/efekv4/bhkl1u
---

text 和 keyword 的区别：text 字段的值用于全文搜索；keyword 字段的值存储时不会被分词建立索引，主要用于统计计算等操作。

**1) 常用类型**

- binary：表示可以存储编码为 Base64 的字符串或者二进制值。
- boolean：表示可以存储 true 和 false 的布尔值。
- keyword：该字段类型的数据在存储时不会进行分词处理，适合进行统计分析，不能进行全文搜索。
- numbers：用于表示数字类型，例如 long 和 double。
- date：表示可以存储日期类型的数据。
- alias：表示为现有字段定义别名。
- text：该字段类型的数据在存储时会进行分词并建立索引，适合进行全文搜索，不能进行统计分析。

**2) 对象和关系类型**

- object：表示一个 JSON 对象。
- nested：嵌套类型，对象中可以嵌套对象。
- array：在 Elasticsearch 中，数组不需要专用的字段类型。默认情况下，任何字段都可以包含 0 个或多个值，但是数组中的所有值必须具有相同的字段类型。

**3）其余类型**

- range：表示范围类型。
- rank\_feature：表示排名类型。
- token\_count：表示令牌计数类型。
- ip：用于 IP 地址的存储和查询的类型。
- geo\_point, geo\_shape：用于地理位置和空间位置的存储与搜索的类型。



### alias

    #创建名为userinfo的索引库并为其创建映射关系
    PUT userinfo
    {
      "mappings": {
        "properties": {
          "age": {
            "type": "long"
          },
          "aliasage": {
            "type": "alias",#别名类型
            "path": "age"
          },
          "transit_mode": {
            "type": "keyword"
          }
        }
      }
    }

在使用别名时需要注意的是，可以使用别名进行数据的搜索，但是不能使用别名进行数据的写入



### 数组类型

在 Elasticsearch 中，没有专用的数组数据类型。默认情况下，任何字段都可以包含 0 个或多个值，不过数组中的所有值必须具有相同的数据类型。

只要保证插入的数组字段中的数据类型是同一个类型，就能把数据写入此数组字段中。



### binary 类型

binary 定义的字段类型可以存储编码为 Base64 的字符串或者二进制值。范例如下：

```json
#创建索引映射并指定blob字段的类型为二进制类型
PUT myindex-2_02
{
  "mappings": {
    "properties": {
      "name": {
        "type": "text"
      },
      "blob": {
        "type": "binary"
      }
    }
  }
}

#在索引库中插入数据，blob的内容是Base64编码的字符串
PUT myindex-2_02/_doc/1
{
  "name": "Some binary blob",
  "blob": "U29tZSBiaW5hcnkgYmxvYg=="
}
```



### 布尔类型

布尔字段类型可以存储 true 和 false 的布尔值，也可以存储 "true" 和 "false" 的字符串。范例如下：

    #创建索引映射并指定is_published字段类型为布尔类型
    PUT myindex-2_03
    {
      "mappings": {
        "properties": {
          "is_published": {
            "type": "boolean"
          }
        }
      }
    }

    #新增数据，字段值必须和映射类型匹配
    POST myindex-2_03/_doc/1?refresh
    {
      "is_published": "true"
    }

    #查询索引库中is_published字段的值是true的数据
    GET myindex-2_03/_search
    {
      "query": {
        "term": {
          "is_published": true
        }
      }
    }

如果需要对布尔值进行转换，可以使用“运行时”脚本来处理，范例如下：

```json
GET myindex-2_03/_search
{
  "fields": [
    {"field": "weight"}
  ],
  "runtime_mappings": {
    "weight": {
      "type": "long",
      "script": "emit(doc['is_published'].value ? 1: 0)"#使用"运行时"脚本转换布尔值
    }
  }
}
```



### 日期类型

Elasticsearch 中的日期类型可以是包含日期格式的字符串，例如 `"2021-01-01"`或 `"2021/01/01 12:10:30"` 等格式，也可以使用自纪元以来的毫秒数来表示（注：在 Unix 中，纪元是指 UTC 时间 1970 年 1 月 1 日 00:00:00）。范例如下：

```json
#创建索引映射并指定date字段的字段类型为日期类型
PUT myindex-2_04
{
  "mappings": {
    "properties": {
      "date": {
        "type": "date"
      }
    }
  }
}

#插入文档数据
PUT  myindex-2_04/_doc/1
{
  "date": "2015-01-01"
}

#插入文档数据
PUT  myindex-2_04/_doc/2
{
  "date": "2015-01-01T12:10:30Z"
}

#插入文档数据
PUT  myindex-2_04/_doc/3
{
  "date": 1420070400001
}
```
