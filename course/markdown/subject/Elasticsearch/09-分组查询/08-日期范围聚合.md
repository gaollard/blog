---
title: 08-日期范围聚合
url: https://www.yuque.com/gaollard/efekv4/ied9ua
---

    #根据出售车的各个时间段来聚合
    GET /myindex-aggtest/_search
    {
      "size": 0,
      "aggs": {
        "range": {
          "date_range": {
            "field": "soldtime",
            "format": "yyyy-MM-dd",
            "ranges": [
              { "from": "2021-06-30" },  
              { "to": "2021-07-01" } 
            ]
          }
        }
      }
    }

日期范围统计还支持根据"Date Math"表达式进行范围分解统计

    #计算5个月之前和之后的销售车辆数量
    GET /myindex-aggtest/_search
    {
      "size": 0,
      "aggs": {
        "range": {
          "date_range": {
            "field": "soldtime",
            "format": "yyyy-MM-dd",
            "ranges": [
              { "from": "now-5M/M" },  
              { "to": "now-5M/M" } 
            ]
          }
        }
      }
    }

```
```
