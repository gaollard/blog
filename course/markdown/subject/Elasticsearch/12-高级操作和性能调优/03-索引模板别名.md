---
title: 03-索引模板别名
url: https://www.yuque.com/gaollard/efekv4/nvemx8
---

在Elasticsearch中，如果想要根据索引模板为索引库指定别名，需要使用aliases关键字

    #创建索引模板并指定别名
    PUT _template/templateds
    {
        "template": "log*",
        "order": 0,
        "settings": {
            "number_of_shards":2
        },
         "aliases": {
           "log-query":{}  #别名名称
         },
        "mappings": {
                     
                "properties": {
                    "name": {
                        "type": "keyword"
                    },
                    "id": {
                        "type": "long"
                    }
                }
                  
        }
    }

以上语句创建了一个名为templateds的索引模板名，索引模板的匹配值是"log*"。根据这个模板创建的索引，它们的别名都是log-query。也就是说，当我们执行下面两个语句时，会自动为log1索引库和log2索引库创建相同的索引映射信息，而且log1和log2索引库的别名都是log-query：

    POST /log1/_doc/1
    {
      "person_name": "张三",
      "id": 1
    }

    GET log1

    POST /log2/_doc/1
    {
      "person_name": "李四",
      "id": 2
    }

在以上语句中，当我们给log1和log2索引库写入数据时，log1和log2匹配到了log*。所以系统会根据模板自动生成log1和log2索引映射。我们需要同时查询两个索引库的数据时，可以使用别名通过一条语句来查询，语句如下：

    POST /log-query/_search
    {
        "size": 10
    }

以上语句会同时查询log1和log2索引库的数据。
