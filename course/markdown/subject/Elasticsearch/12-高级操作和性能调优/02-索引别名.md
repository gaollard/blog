---
title: 02-索引别名
url: https://www.yuque.com/gaollard/efekv4/ree60u
---

假设有一个学生的原始索引 student\_index\_v1，我们给它起一个别名 student\_index，程序中也是用别名 student\_index 进行查询，当业务需求发生改变，需要修改索引库名称的时候，重新创建一个索引库 student\_index\_v2，将别名 student\_index 指向新的索引库 student\_index\_v2，同时将 student\_index\_v1 索引库的数据迁移到新的 student\_index\_v2 索引库中，这样我们就可以做到在零停机下从旧索引库切换到新索引库。索引别名就像一个快捷方式或者软链接。

    #给索引库test1创建别名alias1
    POST /_aliases
    {
        "actions" : [
            { "add" : { "index" : "test1", "alias" : "alias1" } }
        ]
    }

    #删除索引库对应的别名
    POST /_aliases
    {
        "actions" : [
            { "remove" : { "index" : "test1", "alias" : "alias1" } }
        ]
    }

    #索引别名指向新的索引库
    POST /_aliases
    {
        "actions" : [
            { "remove" : { "index" : "test1", "alias" : "alias1" } },
            { "add" : { "index" : "test2", "alias" : "alias1" } }
        ]
    }

以上语句先进行索引别名移除，然后创建索引别名。这个操作是具有原子性的，因此不需要担心短时间内别名不指向一个索引库。

    #一个别名关联多个索引库
    POST /_aliases
    {
      "actions" : [
        { "add" : { "indices" : ["test1", "test2"], "alias" : "alias1" } }
      ]
    }
