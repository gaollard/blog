---
title: 04-绝对中位差
url: https://www.yuque.com/gaollard/efekv4/kebrio
---

绝对中位差是用原数据减去中位数后得到的新数据的绝对值之中位数。Elasticsearch中也提供了这种计算方式，使用median\_absolute\_deviation关键字进行统计。

    #数据准备，如下是不同的价格
    POST /myindex_median_absolute_deviation/_bulk
    { "index": {}}
    {  "price" : 60}
    { "index": {}}
    {  "price" : 70}
    { "index": {}}
    {  "price" : 80}
    #计算价格的绝对中位数
    GET myindex_median_absolute_deviation/_search
    {
      "size": 0,
      "aggs": {
        "review_average": {
          "avg": { # 平均值
            "field": "price"
          }
        },
        "review_variability": { 
          "median_absolute_deviation": { # 绝对中位差
            "field": "price" 
          }
        }
      }
    }
