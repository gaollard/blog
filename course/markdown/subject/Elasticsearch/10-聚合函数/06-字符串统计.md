---
title: 06-字符串统计
url: https://www.yuque.com/gaollard/efekv4/eadsy5
---

    #数据准备
    POST /myindex_string_stats/_bulk
    { "index": {}}
    { "body" : "Do one thing at a time, and do well"}
    { "index": {}}
    { "body" : "Believe in yourself"}
    { "index": {}}
    { "body" : "Keep on going never give up"}
         
    #聚合统计body.keyword字段中内容的长度 
    POST myindex_string_stats/_search
    { 
      "size":0,
      "aggs": {
        "message_stats": {
          "string_stats": {
            "field": "body.keyword"
          }
        }
      }
    }

    {
      …
      },
      "aggregations" : {
        "message_stats" : {
          "count" : 3,
          "min_length" : 19,
          "max_length" : 35,
          "avg_length" : 27.0,
          "entropy" : 3.987274621250932
        }
      }
    }

返回了所有文档中对应字段的内容最大长度、最小长度等
