---
title: 08-百分位等级计算-不精确
url: https://www.yuque.com/gaollard/efekv4/rtxlfi
---

    #数据准备
    POST /myindex_percentile_ranks/_doc/_bulk
    { "index": {}}
    {"name":"张三","address":"中国","age":10}
    { "index": {}}
    {"name":"李四","address":"中国","age":20}
    { "index": {}}
    {"name":"王五","address":"美国","age":30}
    { "index": {}}
    {"name":"赵六","address":"美国","age":40}
    { "index": {}}
    {"name":"李白","address":"美国","age":50}
         
    #计算age字段值等于30和50的百分位等级
    GET myindex_percentile_ranks/_search
    {
      "size": 0,
      "aggs": {
        "age_ranks": {
          "percentile_ranks": {
            "field": "age",   
            "values": [ 30, 50 ]
          }
        }
      }
    }
