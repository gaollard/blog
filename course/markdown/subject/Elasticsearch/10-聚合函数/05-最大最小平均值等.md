---
title: 05-最大最小平均值等
url: https://www.yuque.com/gaollard/efekv4/utpawx
---



### 1. stats

使用stats关键字一次性统计出最大值、最小值、平均值、总和、总条数等信息

    #数据准备
    POST /myindex_stats/_bulk
    { "index": {}}
    { "grade" : 80}
    { "index": {}}
    { "grade" : 90}
    { "index": {}}
    { "grade" : 60}
         
     #查询grade字段的最大值、最小值、平均值、总和、总条数等信息
    POST myindex_stats/_search
    {  "size":0,
      "aggs": {
        "grades_stats": { "stats": { "field": "grade" } }
      }
    }

<!---->

    {
     …
      "hits" : {
        "total" : {
          "value" : 3,
          "relation" : "eq"
        },
        "max_score" : null,
        "hits" : [ ]
      },
      "aggregations" : {
        "grades_stats" : {
          "count" : 3,
          "min" : 60.0,
          "max" : 90.0,
          "avg" : 76.66666666666667,
          "sum" : 230.0
        }
      }
    }



### 2. extended\_stats

统计其他扩展状态值，可以使用extended\_stats关键字进行统计

    POST myindex_stats/_search
    {  "size":0,
      "aggs": {
        "grades_stats": { "extended_stats": { "field": "grade" } }
      }
    }

<!---->

    {
      …
        "hits" : [ ]
      },
      "aggregations" : {
        "grades_stats" : {
          "count" : 3,
          "min" : 60.0,
          "max" : 90.0,
          "avg" : 76.66666666666667,
          "sum" : 230.0,
          "sum_of_squares" : 18100.0,
          "variance" : 155.55555555555597,
          "variance_population" : 155.55555555555597,
          "variance_sampling" : 233.33333333333394,
          "std_deviation" : 12.472191289246489,
          "std_deviation_population" : 12.472191289246489,
          "std_deviation_sampling" : 15.275252316519486,
          "std_deviation_bounds" : {
            "upper" : 101.61104924515965,
            "lower" : 51.722284088173694,
            "upper_population" : 101.61104924515965,
            "lower_population" : 51.722284088173694,
            "upper_sampling" : 107.21717129970564,
            "lower_sampling" : 46.1161620336277
          }
        }
      }
    }
