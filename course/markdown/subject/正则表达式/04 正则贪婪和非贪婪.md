---
title: 正则贪婪和非贪婪 ✔
url: https://www.yuque.com/gaollard/xvzvqu/xk9crx
---



### 1. 贪婪匹配

我们都知道，贪婪就是不满足，尽可能多的要。在正则中，贪婪也是差不多的意思:

> 贪婪匹配：当正则表达式中包含能接受重复的限定符时，通常的行为是（在使整个表达式能得到匹配的前提下）匹配尽可能多的字符，这匹配方式叫做贪婪匹配。特性：一次性读入整个字符串进行匹配，每当不匹配就舍弃最右边一个字符，继续匹配，依次匹配和舍弃（这种匹配-舍弃的方式也叫做回溯），直到匹配成功或者把整个字符串舍弃完为止，因此它是一种最大化的数据返回，能多不会少。

前面我们讲过重复限定符，其实这些限定符就是贪婪量词，比如表达式：

```javascript
var reg = /\d{3,6}/
```

用来匹配3到6位数字，在这种情况下，它是一种贪婪模式的匹配，也就是假如字符串里有6个个数字可以匹配，那它就是全部匹配到。

```javascript
var reg1 = /\d{3,6}/g
var str1 = '61762828 176 2991 871'

console.log(str1.match(reg1)) // ["617628", "176", "2991", "871"]
```

由结果可见：本来字符串中的“61762828”这一段，其实只需要出现3个（617）就已经匹配成功了的，但是他并不满足，而是匹配到了最大能匹配的字符，也就是6个。一个量词就如此贪婪了，那有人会问，如果多个贪婪量词凑在一起，那他们是如何支配自己的匹配权的呢？

是这样的，多个贪婪在一起时，如果字符串能满足他们各自最大程度的匹配时，就互不干扰，但如果不能满足时，会根据深度优先原则，**也就是从左到右的每一个贪婪量词，优先最大数量的满足，剩余再分配下一个量词匹配。**



### 2. 懒惰匹配

> 懒惰匹配：当正则表达式中包含能接受重复的限定符时，通常的行为是（在使整个表达式能得到匹配的前提下）匹配尽可能少的字符，这匹配方式叫做懒惰匹配。
> 特性：从左到右，从字符串的最左边开始匹配，每次试图不读入字符匹配，匹配成功，则完成匹配，否则读入一个字符再匹配，依此循环（读入字符、匹配）直到匹配成功或者把字符串的字符匹配完为止。

![](http://s3.airtlab.com/1567817224776-2ae90bdd-e4dc-486d-af68-401e418f6ff0.jpeg)

```javascript
var reg1 = /(\d{1,2}?)(\d{3,4})/g
var str1 = '61762828 176 2991 87321'

console.log(str1.match(reg1)) // ["61762", "2991", "87321"]
```

> "61762" 是左边的懒惰匹配出6，右边的贪婪匹配出1762
> "2991" 是左边的懒惰匹配出2，右边的贪婪匹配出991
> "87321" 左边的懒惰匹配出8，右边的贪婪匹配出7321
