---
title: 正则基本用法（JS）
url: https://www.yuque.com/gaollard/xvzvqu/grig7p
---

正则表达式是用于匹配字符串中字符组合的模式。在 JavaScript中，正则表达式也是对象。这些模式被用于[RegExp](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp) 的 [exec](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp/exec) 和 [test](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test) 方法, 以及 [String](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String) 的 [match](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/match)、[matchAll](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/matchAll)、[replace](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/replace)、[search](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/search) 和 [split](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/split) 方法。本章介绍 JavaScript 正则表达式。 

### 1. [正则表达式](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F)[创建](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F)

```javascript
var reg1 = /pattern/modifiers  // 字面量
var reg2 = new RegExp(pattern, modifiers); // 构造器
```

- pattern（模式） 描述了表达式的模式
- modifiers(修饰符) 用于指定全局匹配、区分大小写的匹配和多行匹配

> *当使用构造函数创造正则对象时，需要常规的字符转义规则（在前面加反斜杠 \）。比如以下是等价的：*

```javascript
var re = new RegExp("\\w+");
var re = /\w+/;
```



### 2. RegExp 对象修饰符

修饰符用于执行区分大小写和全局匹配:

| 修饰符 | 描述 |
| --- | --- |
| [i](https://www.runoob.com/js/jsref-regexp-i.html) | 执行对大小写不敏感的匹配。 |
| [g](https://www.runoob.com/js/jsref-regexp-g.html) | 执行全局匹配（查找所有匹配而非在找到第一个匹配后停止）。 |
| m | 执行多行匹配。 |



### 3. 正则方法和属性

方法：

| 方法 | 描述 |
| --- | --- |
| [exec](https://www.runoob.com/jsref/jsref-exec-regexp.html) | 检索字符串中指定的值。返回找到的值，并确定其位置。 |
| [test](https://www.runoob.com/jsref/jsref-test-regexp.html) | 检索字符串中指定的值。返回 true 或 false。 |
| [toString](https://www.runoob.com/jsref/jsref-regexp-tostring.html) | 返回正则表达式的字符串。 |

属性：

| 属性 | 描述 |
| --- | --- |
| [constructor](https://www.runoob.com/jsref/jsref-regexp-constructor.html) | 返回一个函数，该函数是一个创建 RegExp 对象的原型。 |
| [global](https://www.runoob.com/jsref/jsref-regexp-global.html) | 判断是否设置了 "g" 修饰符 |
| [ignoreCase](https://www.runoob.com/jsref/jsref-regexp-ignorecase.html) | 判断是否设置了 "i" 修饰符 |
| [lastIndex](https://www.runoob.com/jsref/jsref-lastindex-regexp.html) | 用于规定下次匹配的起始位置 |
| [multiline](https://www.runoob.com/jsref/jsref-multiline-regexp.html) | 判断是否设置了 "m" 修饰符 |
| [source](https://www.runoob.com/jsref/jsref-source-regexp.html) | 返回正则表达式的匹配模式 |



#### RegExp.$1-$9

- 括号匹配项是无限的, RegExp对象捕获的只有九个，可以通过返回一个数组索引获取所有括号匹配项
- 只有在正确匹配的情况下才会改变.

```javascript
var reg = /(\d{2})([a-z])/g
var str = '22a33b44'

// console.log(str.match(reg)) // ["22a", "33b"]
// console.log(RegExp.$1) // 第一组 33
// console.log(RegExp.$2) // 第二组 b

// console.log(reg.exec(str))
// console.log(RegExp.$1) // 第一个组 22
// console.log(RegExp.$2) // a
```



#### RegExp.lastIndex

**lastIndex** 是正则表达式的一个可读可写的整型属性，用来指定下一次匹配的起始索引。 

#### RegExp.prototype.test()

test 返回 Boolean，查找对应的字符串中是否存在模式：

```javascript
 var str = "1a1b1c";
var reg = new RegExp("1.", "");
alert(reg.test(str)); // true
```



#### RegExp.prototype.exec()

exec() 方法在一个指定字符串中执行一个搜索匹配。返回一个结果数组或 [null](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/null)。

在设置了 [global](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp/global) 或 [sticky](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp/sticky) 标志位的情况下（如 /foo/g or /foo/y），JavaScript [RegExp](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp) 对象是有状态的。他们会将上次成功匹配后的位置记录在 [lastIndex](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp/lastIndex) 属性中。使用此特性，exec() 可用来对单个字符串中的多次匹配结果进行逐条的遍历（包括捕获到的匹配），而相比之下， [String.prototype.match()](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/match) 只会返回匹配到的结果。

```javascript
var reg = /\d/g
var str = '456'

let res = reg.exec(str);
while(res) {
  console.log(res[0])
  res = reg.exec(str)
}

// 4
// 5
// 6
```



### 3. 字符串正则有关方法



#### String.prototype.match()



#### String.prototype.matchAll()



#### String.prototype.replace()



#### String.prototype.search()



#### String.prototype.split()



### 参考文档

- <https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions>
-
