---
title: 正则中的反向引用 ✔
url: https://www.yuque.com/gaollard/xvzvqu/bbdmku
---

捕获会返回一个捕获组，这个分组是保存在内存中，不仅可以在正则表达式外部通过程序进行引用，也可以在正则表达式内部进行引用，这种引用方式就是反向引用。

根据捕获组的命名规则，反向引用可分为：

1. 数字编号组反向引用：\k 或 \number
2. 命名编号组反向引用：\k 或 'name'

捕获组通常是和反向引用一起使用的，因为它的作用主要是用来查找一些重复的内容或者做替换指定字符。举个栗子：
比如要查找一串字母 "aabbbbgbddesddfiid" 里成对的字母，如果按照我们之前学到的正则，什么区间啊限定啊断言啊可能是办不到的，现在我们先用程序思维理一下思路：

- 1）匹配到一个字母
- 2）匹配第下一个字母，检查是否和上一个字母是否一样
- 3）如果一样，则匹配成功，否则失败

这里的思路2中匹配下一个字母时，需要用到上一个字母，那怎么记住上一个字母呢？这下子捕获就有用处啦，我们可以利用捕获把上一个匹配成功的内容用来作为本次匹配的条件，好了，有思路就要实践：

- 首先匹配一个字母：\w
- 我们需要做成分组才能捕获，因此写成这样：(\w)
- 那这个表达式就有一个捕获组：（\w）
- 然后我们要用这个捕获组作为条件，那就可以：(\w)\1

还记得捕获组有两种命名方式吗：一种是是根据捕获分组顺序命名，一种是自定义命名来作为捕获组的命名
在默认情况下都是以数字来命名，而且数字命名的顺序是从1开始的。因此要引用第一个捕获组，根据反向引用的数字命名规则 就需要 \k<1>或者\1，当然，通常都是是后者。
我们来测试一下：

```javascript
var reg1 = /(\w)\1/g
var str1 = 'bbccfgdhjhjjkklli'
console.log(str1.match(reg1)) // ["bb", "cc", "jj", "kk", "ll"]

var reg2 = /(a)(b)(c)/g
var str2 = 'aczzxcczxcabc'
console.log(str2.replace(reg2, '$2')) // aczzxcczxcb 将 abc 替换为 b
```
