---
title: 性能排查
url: https://www.yuque.com/gaollard/utbbp1
---

参考资料 <https://www.bilibili.com/video/BV1zd4y127FJ/?spm_id_from=333.337.search-card.all.click&vd_source=0e3c815b57fd2e0fe8ae7e1813631816> 

### 1、慢查询



#### 慢查询时间阈值

```typescript
show variables like "long_query_time%";
```

![image.png](http://s3.airtlab.com/mysql/1667399532196-07dff47e-91dd-45fd-aca7-b29cec2df3a2.png) 

#### 查看慢查询日志

```typescript
show variables like "slow_query%";
```

![image.png](http://s3.airtlab.com/mysql/1667399556378-8edd7f2d-94d4-4a4e-8071-f9c774b03ecc.png) 

### 2、当前线程的执行情况



#### full processlist

![image.png](http://s3.airtlab.com/mysql/1667399673892-8bcc29c3-326f-4830-8c12-7b5771c4a49f.png)
可以使用 kill id 杀死一个线程
![image.png](http://s3.airtlab.com/mysql/1667399767364-f4279202-1438-4ddb-9406-39c0c1d8867d.png) 

#### processlist + where

```typescript
select * from information_schema.processlist where db = 'credit_admin_id_db';
```



### 3、借助 performance\_schema

![image.png](http://s3.airtlab.com/mysql/1667399855162-2b8b1cc5-24c1-4fa7-bde5-57a70bf20911.png)
