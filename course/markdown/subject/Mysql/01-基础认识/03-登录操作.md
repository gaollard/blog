---
title: 03-登录操作
---

## 1. 登陆 mysql

### 1.1 本机登录

```bash
mysql> mysql -uroot -p # 回车输入密码再回车
```

### 1.2 远程登录

```bash
# 格式
mysql -h ip -u root -p -P 3306

# 例如
mysql -h 127.0.0.1 -u root -p -P 3306

mysql -h 39.108.138.156 -u root -p -P 3306
```

## 2. 允许远程登录

初始化的mysql用户权限只能localhost访问，外部机器访问需要添加权限。

### 2.1 mysql 5

```bash
mysql> Grant all privileges on *.* to 'root'@'%' identified by 'password' with grant option;
```

(%表示任意ip，如果指定ip，改为对应ip即可；‘root’是指要使用的用户名)

```bash
mysql> flush privileges;  # (刷新权限或者重启mysql)
```

1. GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'password' ;
   这里的 123456 为你给新增权限用户设置的密码，%代表所有主机，也可以具体到你的主机ip地址
2. flush privileges;  这一步一定要做，不然无法成功！ 这句表示从 mysql 数据库的grant表中重新加载权限数据
   因为MySQL把权限都放在了 cache 中，所以在做完更改后需要重新加载。
   执行完这两步，再次查询用户表命令：select User,authentication\_string,Host from user
   发现多了一个用户，该用户所有的主机都可以访问，此时再次用sqlyog访问连接成功！ 

### 2.2 mysql 8

mysql8 版本执行 `grant all privileges on *.*  to  'root'@'%'  identified by 'root'  with grant option;`

会报语法错误  ERROR 1064 (42000)

应先创建新用户

```sql
create user 'admin'@'%' identified by 'password';
```

执行授权

```sql
GRANT ALL PRIVILEGES ON *.* TO 'admin'@'%';
```

刷新
```sql
flush privileges;
```

授权远程

```sql
ALTER USER 'admin'@'%' IDENTIFIED WITH mysql_native_password BY 'password';
```

刷新

```sql
flush privileges;
```
## 3. 修改登录密码的加密方式
<https://www.cnblogs.com/zhurong/p/9898675.html>
<https://www.cnblogs.com/wpf0419/p/15466752.html>